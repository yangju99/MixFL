[
  {
    "name": "MathUtils.addAndCheck",
    "class_name": "org.apache.commons.math.util.MathUtils",
    "signature": "org.apache.commons.math.util.MathUtils.addAndCheck(long,long)",
    "snippet": "    public static long addAndCheck(long a, long b) {\n        return addAndCheck(a, b, \"overflow: add\");\n    }",
    "comment": " Add two long integers, checking for overflow.  @param a an addend @param b an addend @return the sum <code>a+b</code> @throws ArithmeticException if the result can not be represented as an long @since 1.2 ",
    "is_bug": false,
    "failing_test_cases": 1,
    "buggy_methods": 3
  },
  {
    "name": "MathUtils.addAndCheck",
    "class_name": "org.apache.commons.math.util.MathUtils",
    "signature": "org.apache.commons.math.util.MathUtils.addAndCheck(long,long,String)",
    "snippet": "    private static long addAndCheck(long a, long b, String msg) {\n        long ret;\n        if (a > b) {\n            // use symmetry to reduce boundary cases\n            ret = addAndCheck(b, a, msg);\n        } else {\n            // assert a <= b\n            \n            if (a < 0) {\n                if (b < 0) {\n                    // check for negative overflow\n                    if (Long.MIN_VALUE - b <= a) {\n                        ret = a + b;\n                    } else {\n                        throw new ArithmeticException(msg);\n                    }\n                } else {\n                    // opposite sign addition is always safe\n                    ret = a + b;\n                }\n            } else {\n                // assert a >= 0\n                // assert b >= 0\n\n                // check for positive overflow\n                if (a <= Long.MAX_VALUE - b) {\n                    ret = a + b;\n                } else {\n                    throw new ArithmeticException(msg);\n                }\n            }\n        }\n        return ret;\n    }",
    "comment": " Add two long integers, checking for overflow.  @param a an addend @param b an addend @param msg the message to use for any thrown exception. @return the sum <code>a+b</code> @throws ArithmeticException if the result can not be represented as an long @since 1.2 ",
    "is_bug": false,
    "failing_test_cases": 1,
    "buggy_methods": 3
  },
  {
    "name": "MathUtils.binomialCoefficient",
    "class_name": "org.apache.commons.math.util.MathUtils",
    "signature": "org.apache.commons.math.util.MathUtils.binomialCoefficient(int,int)",
    "snippet": "    public static long binomialCoefficient(final int n, final int k) {\n        if (n < k) {\n            throw new IllegalArgumentException(\n                \"must have n >= k for binomial coefficient (n,k)\");\n        }\n        if (n < 0) {\n            throw new IllegalArgumentException(\n                \"must have n >= 0 for binomial coefficient (n,k)\");\n        }\n        if ((n == k) || (k == 0)) {\n            return 1;\n        }\n        if ((k == 1) || (k == n - 1)) {\n            return n;\n        }\n        long result = Math.round(binomialCoefficientDouble(n, k));\n        if (result == Long.MAX_VALUE) {\n            throw new ArithmeticException(\n                \"result too large to represent in a long integer\");\n        }\n        // Use symmetry for large k\n        \n        // We use the formula\n        // (n choose k) = n! / (n-k)! / k!\n        // (n choose k) == ((n-k+1)*...*n) / (1*...*k)\n        // which could be written\n        // (n choose k) == (n-1 choose k-1) * n / k\n            // For n <= 61, the naive implementation cannot overflow.\n            // For n > 61 but n <= 66, the result cannot overflow,\n            // but we must take care not to overflow intermediate values.\n                // We know that (result * i) is divisible by j,\n                // but (result * i) may overflow, so we split j:\n                // Filter out the gcd, d, so j/d and i/d are integer.\n                // result is divisible by (j/d) because (j/d)\n                // is relative prime to (i/d) and is a divisor of\n                // result * (i/d).\n            // For n > 66, a result overflow might occur, so we check\n            // the multiplication, taking care to not overflow\n            // unnecessary.\n        return result;\n    }",
    "comment": " Returns an exact representation of the <a href=\"http://mathworld.wolfram.com/BinomialCoefficient.html\"> Binomial Coefficient</a>, \"<code>n choose k</code>\", the number of <code>k</code>-element subsets that can be selected from an <code>n</code>-element set. <p> <Strong>Preconditions</strong>: <ul> <li> <code>0 <= k <= n </code> (otherwise <code>IllegalArgumentException</code> is thrown)</li> <li> The result is small enough to fit into a <code>long</code>. The largest value of <code>n</code> for which all coefficients are <code> < Long.MAX_VALUE</code> is 66. If the computed value exceeds <code>Long.MAX_VALUE</code> an <code>ArithMeticException</code> is thrown.</li> </ul></p>  @param n the size of the set @param k the size of the subsets to be counted @return <code>n choose k</code> @throws IllegalArgumentException if preconditions are not met. @throws ArithmeticException if the result is too large to be represented by a long integer. ",
    "is_bug": true,
    "failing_test_cases": 1,
    "buggy_methods": 3
  },
  {
    "name": "MathUtils.binomialCoefficientDouble",
    "class_name": "org.apache.commons.math.util.MathUtils",
    "signature": "org.apache.commons.math.util.MathUtils.binomialCoefficientDouble(int,int)",
    "snippet": "    public static double binomialCoefficientDouble(final int n, final int k) {\n        \n  \n        return Math.floor(Math.exp(binomialCoefficientLog(n, k)) + 0.5);\n    }",
    "comment": " Returns a <code>double</code> representation of the <a href=\"http://mathworld.wolfram.com/BinomialCoefficient.html\"> Binomial Coefficient</a>, \"<code>n choose k</code>\", the number of <code>k</code>-element subsets that can be selected from an <code>n</code>-element set. <p> <Strong>Preconditions</strong>: <ul> <li> <code>0 <= k <= n </code> (otherwise <code>IllegalArgumentException</code> is thrown)</li> <li> The result is small enough to fit into a <code>double</code>. The largest value of <code>n</code> for which all coefficients are < Double.MAX_VALUE is 1029. If the computed value exceeds Double.MAX_VALUE, Double.POSITIVE_INFINITY is returned</li> </ul></p>  @param n the size of the set @param k the size of the subsets to be counted @return <code>n choose k</code> @throws IllegalArgumentException if preconditions are not met. ",
    "is_bug": true,
    "failing_test_cases": 1,
    "buggy_methods": 3
  },
  {
    "name": "MathUtils.binomialCoefficientLog",
    "class_name": "org.apache.commons.math.util.MathUtils",
    "signature": "org.apache.commons.math.util.MathUtils.binomialCoefficientLog(int,int)",
    "snippet": "    public static double binomialCoefficientLog(final int n, final int k) {\n        if (n < k) {\n            throw new IllegalArgumentException(\n                \"must have n >= k for binomial coefficient (n,k)\");\n        }\n        if (n < 0) {\n            throw new IllegalArgumentException(\n                \"must have n >= 0 for binomial coefficient (n,k)\");\n        }\n        if ((n == k) || (k == 0)) {\n            return 0;\n        }\n        if ((k == 1) || (k == n - 1)) {\n            return Math.log((double) n);\n        }\n        \n        /*\n         * For values small enough to do exact integer computation,\n         * return the log of the exact value \n         */\n        \n        /*\n         * Return the log of binomialCoefficientDouble for values that will not\n         * overflow binomialCoefficientDouble\n         */\n        \n        /*\n         * Sum logs for values that could overflow\n         */\n        double logSum = 0;\n\n        // n!/k!\n        for (int i = k + 1; i <= n; i++) {\n            logSum += Math.log((double)i);\n        }\n\n        // divide by (n-k)!\n        for (int i = 2; i <= n - k; i++) {\n            logSum -= Math.log((double)i);\n        }\n\n        return logSum;      \n    }",
    "comment": " Returns the natural <code>log</code> of the <a href=\"http://mathworld.wolfram.com/BinomialCoefficient.html\"> Binomial Coefficient</a>, \"<code>n choose k</code>\", the number of <code>k</code>-element subsets that can be selected from an <code>n</code>-element set. <p> <Strong>Preconditions</strong>: <ul> <li> <code>0 <= k <= n </code> (otherwise <code>IllegalArgumentException</code> is thrown)</li> </ul></p>  @param n the size of the set @param k the size of the subsets to be counted @return <code>n choose k</code> @throws IllegalArgumentException if preconditions are not met. ",
    "is_bug": true,
    "failing_test_cases": 1,
    "buggy_methods": 3
  }
]